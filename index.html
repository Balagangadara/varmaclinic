<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link href="floatingicon.css?v=1.0" rel="stylesheet"> 
    <link href="index.css?v=1.0" rel="stylesheet">
    <link href="style.css?v=1.0" rel="stylesheet">
    <link href="style1.css?v=1.0" rel="stylesheet">
    <link href="style2.css" rel="stylesheet">
    <script type="text/javascript" src="script.js?v=1.0"></script> 
    <script type="text/javascript" src="validate.js?v=1.0"></script> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Varma Clinic</title>
   

</head>
<body>
   
    <nav class="navbar">
        <div class="navbar-container">
            <a href="#" class="logo">
                <img src="images/logo.png" alt="MyLogo" style="height: 70px; ">
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Book An Appointment</a></li>
              
                <li>
                    <a id="latest-articles-link" href="index1.html" class="pdf-link latest-articles-link" target="_blank">
                        <i class="fas fa-file-pdf" style="color: red;"></i> Latest Articles
                    </a>
                </li>
                <li>
                    <a href="index2.html" class="pdf-link">
                        <i class="fas fa-list" style="color: blue;"></i> All Articles
                    </a>
                </li>
            </ul>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
        </div>
    </nav>
    <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>

    <div class="form-container" >
        <!-- <img src="images/logo.png" width="620" height="100" alt="Form Logo" /> -->
        <h1>Book Your Appointment</h1>
        <form id="appointmentForm">
            <div class="form-group">
                <label for="name">Patient Name:</label>
                <input type="text" id="name" name="name" required placeholder="Enter name" oninput="validateForm()">
                <small id="nameError" class="error-message">Please enter a valid name (alphabets only).</small>
            </div>
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required placeholder="Enter age" oninput="validateForm()">
                <small id="ageError" class="error-message">Please enter a valid age (1-110 and up to 3 digits).</small>
            </div>
            <div class="form-group">
                <label for="gender" style="margin-top: 20px;">Gender:</label>
                <select id="gender" name="gender" required onchange="validateForm()">
                    <option value="">Please Select</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Transgender">Transgender</option>
                </select>
            </div>
            <div class="form-group" style="margin-top: 20px;">
                <label for="phone" style="margin-top: 20px;">Mobile Number:</label>
                <input type="text" class="form-control" name="Mobile number" id="phone" placeholder=""
                       maxlength="10" required>
                <small id="phoneError" class="error-message" style="display:none; color: red;">
                    Phone number must be 10 digits long and start with a digit between 6-9.
                </small>
            </div>
            
            
            <div class="form-group" style="margin-top: 20px;">
                <label>Reason For Your Appointment:</label>
                <div class="checkbox-container" style="margin-top: 10px;">
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Fever" onchange="validateForm()"> Fever
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Cold/Cough" onchange="validateForm()"> Cold/Cough
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Vomiting" onchange="validateForm()"> Vomiting
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Head Ache" onchange="validateForm()"> Head Ache
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Diarrhoea/Dysentery" onchange="validateForm()"> Diarrhoea/Dysentery
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Stomach Pain" onchange="validateForm()"> Stomach Pain
                        </label>
                    </div>
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" name="reason" value="Body pain/Joint pain" onchange="validateForm()"> Body pain/Joint pain
                        </label>
                    </div>
                    <div class="checkbox-item others-input-container">
                        <label>
                            <input type="checkbox" name="reason" value="Others" onchange="toggleOthersInput()"> Others
                        </label>
                        <input type="text" id="othersInput" maxlength="50" oninput="validateOthersInput()" style="display:none;" placeholder="Type here...">
                    </div>
                </div>
                <small id="symptomError" class="error-message" style="display:none; color: red;">
                    Please select at least one symptom.
                </small>
            </div>
            
        
            <div class="form-group">
                <label for="date">Select Date:</label>
                <input type="date" id="date">
                <small id="formError" class="error-message" style="display:none; color: red;">
                    Please fill out all required fields before selecting a time slot.
                </small>
                <div id="available-slots" class="disabled-slots">
                    <!-- Available slots will be dynamically loaded here -->
                </div>
            </div>
             <!-- Legend for slot colors -->
             <div class="legend-box">
                <p><span class="legend-color available"></span> Available</p>
                <p><span class="legend-color not-available"></span> Not Available</p>
                <p><span class="legend-color current-booking"></span> Current Booking</p>
            </div>
            
            <div class="appointment-container">
                <div class="appointment-heading">Book your appointment via</div>
                <div class="appointment-buttons">
                    <button type="button" id="whatsappButton" onclick="redirectToWhatsApp()" disabled>
                        <i class="fab fa-whatsapp" style="color: #25D366;"></i> <!-- WhatsApp Green -->
                    </button>
                    <button type="button" id="smsButton" onclick="redirectToSMS()" disabled>
                        <i class="fas fa-sms" style="color: #007BFF;"></i> <!-- SMS Blue -->
                    </button>
                    <button type="button" id="emailButton" onclick="redirectToEmail()" disabled>
                        <i class="fas fa-envelope" style="color: #FF5722;"></i> <!-- Email Orange -->
                    </button>
                    <button type="button" id="callButton" onclick="redirectToCall()" disabled>
                        <i class="fas fa-phone" style="color: #4CAF50;"></i> <!-- Phone Green -->
                    </button>
                    
                </div>
            </div>
            
           
        </div>
        </form>
    </div>
            
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    
<style>
  
</style>
    
<script>
   document.addEventListener('DOMContentLoaded', function() {
    const nameInput = document.getElementById("name");
    const ageInput = document.getElementById("age");
    const phoneInput = document.getElementById("phone");
    const genderSelect = document.getElementById("gender");
    const dateInput = document.getElementById("date");
    const reasonCheckboxes = document.querySelectorAll('input[name="reason"]');
    const othersInput = document.getElementById('othersInput');
    const formError = document.getElementById("formError");
    const availableSlots = document.getElementById("available-slots");
    const slotButtons = availableSlots.querySelectorAll('button');

    function validateForm() {
        const name = nameInput.value.trim();
        const age = ageInput.value.trim();
        const gender = genderSelect.value;
        const phone = phoneInput.value.trim();
        const reason = Array.from(reasonCheckboxes).filter(cb => cb.checked).map(cb => cb.value);
        const appointmentDate = dateInput.value;
        const timeSlot = localStorage.getItem('selectedSlotId');

        const nameValid = name.length >= 3 && /^[a-zA-Z\s]+$/.test(name);
        const ageValid = age !== "" && /^[1-9][0-9]?$|^1[0-1][0-9]$/.test(age);
        const phoneValid = /^[6-9][0-9]{9}$/.test(phone);
        const genderValid = gender !== "";
        const reasonValid = reason.length > 0;
        const appointmentDateValid = appointmentDate !== "";
        const timeSlotValid = !!timeSlot;

        const allValid = nameValid && ageValid && phoneValid && genderValid && reasonValid && appointmentDateValid;

        // Enable or disable buttons based on form validity
        document.getElementById("whatsappButton").disabled = !allValid;
        document.getElementById("smsButton").disabled = !allValid;
        document.getElementById("emailButton").disabled = !allValid;
        document.getElementById("callButton").disabled = !allValid;

        // Display form error if not all fields are valid
        formError.style.display = allValid ? 'none' : 'block';

        // Enable or disable slot selection based on form validity
        availableSlots.classList.toggle('disabled-slots', !allValid);
        slotButtons.forEach(button => button.disabled = !allValid);

        if (allValid) {
            loadSlots(); // Ensure slots are loaded if the form is valid
        }
    }

    function validatePhoneNumber() {
        const phoneError = document.getElementById("phoneError");
        let phoneValue = phoneInput.value.replace(/\D/g, ''); // Keep only digits

        const phonePattern = /^[6-9][0-9]{9}$/; // Start with 6-9

        if (phonePattern.test(phoneValue)) {
            phoneInput.value = phoneValue; // Update input value to cleaned value
            phoneError.style.display = "none"; // Hide error message if valid
        } else {
            phoneError.style.display = "block"; // Show error message if invalid
            phoneError.textContent = "Phone number must be 10 digits long and start with a digit between 6-9.";
        }

        validateForm(); // Revalidate form after phone number change
    }

    function restrictAgeInput() {
        const ageError = document.getElementById("ageError");
        let value = ageInput.value.replace(/\D/g, '');

        const age = parseInt(value, 10);

        if (value.length > 3 || age < 1 || age > 110) {
            ageError.style.display = "block";
            ageInput.value = '';
        } else {
            ageError.style.display = "none";
            ageInput.value = value;
        }

        validateForm(); // Revalidate form after age change
    }

    function restrictNameInput() {
        const nameError = document.getElementById("nameError");
        let value = nameInput.value.replace(/[^a-zA-Z\s]/g, '');

        nameInput.value = value;

        const letterOnlyValue = value.replace(/\s/g, ''); // Remove spaces for length check
        if (letterOnlyValue.length < 3) {
            nameError.style.display = "block";
            nameError.textContent = "Name must be at least 3 letters.";
        } else {
            nameError.style.display = "none";
        }

        validateForm(); // Revalidate form after name change
    }

    function validateOthersInput() {
        const value = othersInput.value;
        const sanitizedValue = value.replace(/[^a-zA-Z0-9\s]/g, '');
        othersInput.value = sanitizedValue.substring(0, 50);

        validateForm(); // Revalidate form after others input change
    }

    function toggleOthersInput() {
        const othersCheckbox = document.querySelector('input[name="reason"][value="Others"]');
        othersInput.style.display = othersCheckbox.checked ? 'inline' : 'none';

        validateForm(); // Revalidate form when the checkbox for "Others" changes
    }

    function loadSlots() {
        if (!availableSlots.innerHTML.trim()) {
            // Load slots only if not already loaded
            availableSlots.innerHTML = `
                <button type="button" onclick="selectSlot('slot1')">Slot 1</button>
                <button type="button" onclick="selectSlot('slot2')">Slot 2</button>
            `;
            // Initially disable slot buttons
            availableSlots.querySelectorAll('button').forEach(button => button.disabled = true);
        }
    }

    // Attach event listeners
    nameInput.addEventListener("input", restrictNameInput);
    ageInput.addEventListener("input", restrictAgeInput);
    phoneInput.addEventListener("input", validatePhoneNumber);
    genderSelect.addEventListener("change", validateForm);
    dateInput.addEventListener("change", validateForm); // Check date input change for form validity
    reasonCheckboxes.forEach(checkbox => {
        checkbox.addEventListener("change", validateForm);
    });
    othersInput.addEventListener("input", validateOthersInput);
    document.querySelector('input[name="reason"][value="Others"]').addEventListener("change", toggleOthersInput);

    // Initialize the date picker
    initializeDatePicker();
});


</script>
<script>  
    document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.querySelector('.nav-links');
            
            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
        });
</script>
<script>
    function checkTimeSlots() {
        const timeSlots = document.querySelectorAll('.available-slots p');
        const formError = document.getElementById('formError');
        
        if (timeSlots.length === 0) {
            formError.style.display = 'block'; // Show the error message
        } else {
            formError.style.display = 'none'; // Hide the error message
        }
    }

    // Example: call this function when needed, e.g., on page load or after a specific action
    checkTimeSlots();
</script>
<style>
   
/* Target iPhones specifically with their screen sizes */
@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2) {
    
    /* Adjust size and spacing of checkboxes */
    .reason-container input[type="checkbox"] {
        width: 12px;  /* Checkbox size */
        height: 12px;
        margin-right: 4px;  /* Space between checkbox and label */
    }

    /* Align checkbox label and reduce spacing */
    .reason-container label {
        font-size: 12px;  /* Smaller font size for mobile */
        display: inline-flex;  /* Inline flex for proper alignment */
        align-items: center;  /* Vertically center label and checkbox */
        margin-bottom: 6px;  /* Reduced margin between items */
        padding-right: 10px; /* Adjust padding between labels */
    }

    /* Adjust flexbox properties for better spacing */
    .reason-container {
        display: flex;
        flex-wrap: wrap;  /* Allow items to wrap */
        gap: 6px;  /* Reduce gap between checkboxes */
    }

    /* Make sure each checkbox takes up the correct space */
    .reason-container .checkbox-item {
        flex: 1 1 calc(50% - 6px);  /* Adjust to fit two per row, reduce gap */
        box-sizing: border-box;
    }
}

/* Adjust layout further for smaller screens like iPhone SE */
@media only screen and (max-device-width: 375px) and (-webkit-min-device-pixel-ratio: 2) {
    .reason-container .checkbox-item {
        flex: 1 1 calc(100% - 8px);  /* Stack checkboxes one per row */
        margin-bottom: 6px;  /* Reduced margin for smaller screens */
    }
    
    /* Reduce margin and padding for the checkbox items */
    .reason-container input[type="checkbox"] {
        margin-right: 3px; /* Reduce space between checkbox and text */
    }
    
    .reason-container label {
        font-size: 11px; /* Slightly smaller font for tight spaces */
        padding-right: 5px; /* Adjust padding for smaller screen */
    }
}


</style>
    </body>
</html>